<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="navtreePage.js"></script>
    <script src="ufoSample.js"></script>
    <script src="hairEyeSexSample.js"></script>
    <script src="UCBAdmissions.js"></script>
    <script src="../datagrid.js"></script>
    <link rel="stylesheet" href="demo.css">
    <script>
        var navtreePage = new NavtreePage(),
                datasets;

        datasets = {
            ufoSample: {
                data: ufoSample,
                source: 'Completely invented, pretend data.',
                title: "UFO Data for various California Counties"
            },
            hairEyeSexSample: {
                data: hairEyeSexSample,
                source: "https://vincentarelbundock.github.io/Rdatasets/datasets.html",
                title: "Hair & Eye color by gender"
            },
            UCBAdmissionsSample: {
                data: UCBAdmissionsSample,
               source: "https://vincentarelbundock.github.io/Rdatasets/datasets.html",
                title: "Student Admissions at UC Berkeley"
            }
        };
        navtreePage.init();

        $(document).ready(function () {
            var key,
                    sampleData;

            $("a#flipxy").click(function () {
                ++navtreePage.flipCount;
                navtreePage.clearPage();
                navtreePage.makeDatagrid(sampleData.data);
            });

            $("a#rotate").click(function () {
                ++navtreePage.rotationCount;
                navtreePage.clearPage();
                $("#rotateLabel").html("Topic:<br>" + sampleData.data.maps.topics[navtreePage.rotationCount % 3].title);
                navtreePage.makeDatagrid(sampleData.data);
            });

            $('select#dataSelect').change(function () {
                navtreePage.clearPage();
                sampleData = datasets[$(this).val()];
                $("#rotateLabel").html("Topic:<br>" + sampleData.data.maps.topics[0].label);
                navtreePage.makeDatagrid(sampleData.data);
                $(".source").html("Source: " + sampleData.source);
            });

            function init() {
                $.each(datasets, function(key, record) {
                    $('select#dataSelect').append($('<option />', {text: record.title, val: key}));
                })
                sampleData = datasets[$('select#dataSelect').val()];
                $(".source").html("Source: " + sampleData.source);
                navtreePage.makeDatagrid(sampleData.data);
            }

            init();
        });

    </script>
</head>
<body>
<div id="datapageView" class="datapage regular">
    <div class="pagecontrols clearfix">
        <div id="gridOrientationControls leftside">
            <label name="dataSelect">Dataset: </label>
            <select id="dataSelect"></select>
            <!-- TO DO:  wrong topic is showing, fix -->
            <span id="rotateLabel" class="label"></span>
            <a class="action rotate" id="rotate"></a>
            <a class="action flip" id="flipxy"></a>
        </div>
    </div>
    <div id="grids"></div>
    <div class="source"></div>
</div>
</body>
</html>
